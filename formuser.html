<!DOCTYPE html>
<html lang="ms">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borang Aduan Kerosakan</title>
    <link rel="stylesheet" href="formuser.css">
    <style>
        :root {
            --bg-overlay: rgba(244, 247, 246, 0.9);
            --bg-image: none;
        }

        body {
            background-image: linear-gradient(var(--bg-overlay), var(--bg-overlay)), var(--bg-image) !important;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
    </style>
    <!-- Fast Branding Script -->
    <script>
        (function () {
            const savedLogo = localStorage.getItem('appLogo');
            const savedBg = localStorage.getItem('appBackground');
            const savedName = localStorage.getItem('systemName');
            const savedCopyright = localStorage.getItem('footerCopyright');

            if (savedBg) {
                document.documentElement.style.setProperty('--bg-image', `url('${savedBg}')`);
            }

            document.addEventListener('DOMContentLoaded', () => {
                if (savedLogo) {
                    const logoContainer = document.querySelector('.logo-container');
                    if (logoContainer) {
                        const img = document.createElement('img');
                        img.src = savedLogo;
                        img.className = 'logo';
                        img.alt = 'Logo';
                        logoContainer.innerHTML = '';
                        logoContainer.appendChild(img);
                    }
                }
                if (savedName) {
                    const h1 = document.querySelector('header h1');
                    if (h1) h1.textContent = savedName;
                }
                if (savedCopyright) {
                    const copyEl = document.getElementById('footer-copyright-text');
                    if (copyEl) copyEl.innerHTML = savedCopyright;
                }
            });
        })();
    </script>
</head>

<body>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div id="loading-percentage" class="loading-percentage">0%</div>
            <div id="loading-text" class="loading-text">Memproses...</div>
            <div id="upload-progress-container" class="upload-progress-container">
                <div id="upload-progress-bar" class="upload-progress-bar"></div>
            </div>
        </div>
    </div>

    <div id="app-container" class="container">
        <!-- Form will be injected here by JavaScript -->
    </div>

    <!-- Footer Copyright -->
    <footer
        style="margin: 40px 0 20px; text-align: center; color: #7f8c8d; font-size: 0.85rem; font-weight: 500; width: 100%;">
        <p id="footer-copyright-text">&copy; 2024 Jabatan Kerja Raya. Hak Cipta Terpelihara.</p>
    </footer>

    <!-- Toast Notification Container -->
    <div id="toast"></div>

    <script src="client-api.js?v=3"></script>
    <script src="formuser.js?v=3"></script>
</body>

</html>